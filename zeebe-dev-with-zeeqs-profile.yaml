zeebe:
  clusterSize: 1
  partitionCount: 1
  replicationFactor: 1
  extraInitContainers: |
    - name: init-exporters-hazelcast
      image: busybox:1.28
      command: ['/bin/sh', '-c']
      args: ['wget --no-check-certificate https://repo1.maven.org/maven2/io/zeebe/hazelcast/zeebe-hazelcast-exporter/0.8.0-alpha1/zeebe-hazelcast-exporter-0.9.0-alpha1-jar-with-dependencies.jar -O /exporters/zeebe-hazelcast-exporter.jar; ls -al']
      volumeMounts:
      - name: exporters
        mountPath: /exporters/
    zeebeCfg: |- 
      [[exporters]]
      id = "elasticsearch"
      className = "io.zeebe.exporter.ElasticsearchExporter"
        [exporters.args]
        url = "http://elasticsearch-master:9200"
        [exporters.args.bulk]
        delay = 5
        size = 1_000
        #[exporters.args.authentication]
        #username = elastic
        #password = changeme
        [exporters.args.index]
        prefix = "zeebe-record"
        createTemplate = true
        command = false
        event = true
        rejection = false
        deployment = true
        incident = true
        job = true
        message = false
        messageSubscription = false
        raft = false
        workflowInstance = true
        workflowInstanceSubscription = false
      
      [[exporters]]
      id = "hazelcast"
      jarPath = "/usr/local/zeebe/exporters/zeebe-hazelcast-exporter.jar"
      className = "io.zeebe.hazelcast.exporter.HazelcastExporter"
        [exporters.args]
        enabledValueTypes = "JOB,WORKFLOW_INSTANCE,DEPLOYMENT,INCIDENT,TIMER,VARIABLE,MESSAGE,MESSAGE_SUBSCRIPTION,MESSAGE_START_EVENT_SUBSCRIPTION"
        updatePosition = false
  
  elasticsearch:
    imageTag: 6.8.5 
    replicas: 1
    minimumMasterNodes: 1
  # Permit co-located instances for solitary minikube virtual machines.
    antiAffinity: "soft"
    labels: { "app" : "zeebe" }
  
  # Shrink default JVM heap.
    esJavaOpts: "-Xmx128m -Xms128m"
  
  # Allocate smaller chunks of memory per pod.
    resources:
      requests:
        cpu: "100m"
        memory: "512M"
      limits:
        cpu: "1000m"
        memory: "512M"
  
  # Request smaller persistent volumes.
    volumeClaimTemplate:
      accessModes: [ "ReadWriteOnce" ]
      storageClassName: "standard"
      resources:
        requests:
          storage: 100M
    
operate:
  enabled: true
  
tasklist:
  enabled: true
    
zeeqs: 
  enabled: true
  hazelcast:
    cluster:
      memberCount: 1
  
